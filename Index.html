<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>iSEC Dimension 3.0 Game - Snakes & Ladders</title>
  <style>
    :root{--size:600px;--cell:calc(var(--size)/10)}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;display:flex;gap:20px;padding:20px;background:#f2f6f9}
    .board-wrap{width:var(--size);position:relative;border-radius:8px;overflow:visible}
    .board{width:var(--size);height:var(--size);display:grid;grid-template-columns:repeat(10,1fr);grid-auto-rows:1fr;border-radius:8px;box-shadow:0 6px 18px rgba(22,40,60,0.12);overflow:hidden}
    .cell{box-sizing:border-box;border:1px solid rgba(0,0,0,0.06);display:flex;align-items:flex-end;justify-content:flex-end;padding:6px;position:relative;background:linear-gradient(180deg,#fff,#fbfdff)}
    .cell .num{position:absolute;top:6px;left:6px;font-size:12px;color:#333;font-weight:600}
    .cell .tokens{display:flex;gap:6px;z-index:6;position:relative}
    .token{width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:13px;font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,0.25)}
    .controls{max-width:420px;flex:1}
    .players{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
    label{display:flex;gap:8px;align-items:center}
    input[type="text"]{padding:8px;border:1px solid #ddd;border-radius:8px}
    button{padding:8px 12px;border-radius:8px;border:0;background:#1769aa;color:#fff;cursor:pointer;transition:background 0.18s}
    button:hover{background:#145b86}
    button.secondary{background:#666}
    .log{height:220px;overflow:auto;border:1px solid #eee;padding:8px;border-radius:6px;background:#fff}
    .settings{margin-top:8px}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.48);display:none;align-items:center;justify-content:center;z-index:120}
    .modal .card{background:#fff;padding:18px;border-radius:10px;max-width:720px;width:92%;box-shadow:0 10px 30px rgba(2,6,23,0.18)}
    .question{margin:12px 0}
    .choices{display:flex;flex-direction:column;gap:8px}
    .small{font-size:13px;color:#444}
    .footer-hint{margin-top:8px;color:#666;font-size:13px}
    textarea{width:100%;height:110px;border-radius:8px;padding:8px;border:1px solid #ddd}
    /* overlay styling */
    svg#overlay{position:absolute;top:0;left:0;z-index:2;pointer-events:none}
    .ladder-line{stroke:#5d4037;stroke-width:8;stroke-linecap:round}
    .ladder-rung{stroke:#a1887f;stroke-width:5;stroke-linecap:round}
    .snake-path{stroke:#c62828;stroke-width:8;stroke-linecap:round;fill:none;stroke-linejoin:round}
    .snake-head{fill:#b71c1c;stroke:#4a0404;stroke-width:2}
    .marker-label{font-size:12px;fill:#fff;font-weight:700;text-anchor:middle}
    .uploader{display:flex;gap:8px;align-items:center;margin-top:8px}
    .uploader input{cursor:pointer}
    @media(max-width:900px){body{flex-direction:column;align-items:center}} 
  
    #startBtn { background: green; }
    #startBtn:hover { background: darkgreen; }
    #rollBtn { background: orange; }
    #rollBtn:hover { background: darkorange; }

  </style>
</head>
<body>
  <div class="board-wrap">
    <div id="board" class="board" aria-hidden="false"></div>
    <svg id="overlay" width="600" height="600" viewBox="0 0 600 600" preserveAspectRatio="none"></svg>
  </div>

  <div class="controls">
    <h2>iSEC Dimension 3.0 Game - Snakes & Ladders</h2>
    <div class="players" id="playerInputs"></div>
    <div style="display:flex;gap:8px;margin-bottom:8px">
      <button id="addPlayer">Add Player</button>
      <button id="startBtn">Start Game</button>
      <button id="resetBtn" class="secondary">Reset</button>
    </div>

    <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
      <button id="rollBtn" disabled>Roll Dice</button>
      <div id="dice" class="small">Dice: -</div>
      <div id="currentTurn" class="small" style="margin-left:auto">Turn: -</div>
    </div>

    <div class="settings">
      <h4>Game Settings</h4>
      <label><input type="checkbox" id="ladderNeedsQuestion" checked> Require question to climb ladder</label>
      <label><input type="checkbox" id="snakeNeedsQuestion" checked> Allow question to avoid snake</label>
    </div>

    <div class="uploader">
      <div>
        <label>Snake image: <input id="snakeImageInput" type="file" accept="image/*"></label>
      </div>
      <div>
        <label>Ladder image: <input id="ladderImageInput" type="file" accept="image/*"></label>
      </div>
      <div>
        <button id="clearIcons" class="secondary">Clear Icons</button>
      </div>
    </div>

    <div style="margin-top:12px">
      <h4>Game Log</h4>
      <div class="log" id="log"></div>
    </div>

    <div style="margin-top:12px">
      <h4>Question Bank (editable)</h4>
      <small class="small">Edit JSON array of questions below. Each question: {"q":"...","choices":["a","b"],"answer":0}</small>
      <textarea id="questionData"></textarea>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input type="file" id="fileInput" accept="application/json" style="display:none"/>
        <button id="saveQuestions">Save Questions</button>
        <button id="loadSample" class="secondary">Load Questions from File</button>
      </div>
    </div>

    <p class="footer-hint">Open this file in your browser. To share, upload to any static host (GitHub Pages). For networked multiplayer, ask and I'll add a simple server version.</p>
  </div>

  <!-- Question Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="card">
      <h3 id="modalTitle">Question</h3>
      <div id="modalBody">
        <div class="question" id="qText"></div>
        <div class="choices" id="qChoices"></div>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="submitAnswer">Submit</button>
          <button id="cancelAnswer" class="secondary">Cancel (treat as wrong)</button>
        </div>
      </div>
    </div>
  </div>

<script>
// ---------------- CONFIG ----------------
const CSS_BOARD_SIZE = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--size')) || 600;
const CELL_SIZE = CSS_BOARD_SIZE / 10;
const BOARD_PX = CSS_BOARD_SIZE;

// snakes and ladders mapping (start->end)
let snakes = {16:6,48:30,64:60,79:19,93:68,95:24,97:76};
let ladders = {2:38,7:14,8:31,15:26,21:42,28:84,36:44,51:67,71:91,78:98};

let questionBank = [
   {
    "q": "Which of the following is a common sign of a phishing email?",
    "choices": [
      "0. Email from a known contact with expected content",
      "1. Spelling mistakes and urgent call to action",
      "2. Secure domain and verified sender",
      "3. Personalized greeting and correct grammar"
    ],
    "answer": 1
  },
  {
    "q": "When was DPDPA proposed in India?",
    "choices": [
      "0. June 2023",
      "1. August 2023",
      "2. June 2024",
      "3. August 2024"
    ],
    "answer": 1
  },
  {
    "q": "In which of the following cases does GDPR apply (choose the best one)?",
    "choices": [
      "0. People of all geographies",
      "1. Indian organization holding or using European personal data",
      "2. Every European Organization holding or using sensitive data",
      "3. Every organization around the world holding or using European personal data"
    ],
    "answer": 3
  },
  {
    "q": "Which of the following is a primary responsibility of the cloud service provider in a shared responsibility model?",
    "choices": [
      "0. Data encryption",
      "1. Physical security of data centers",
      "2. Managing user access",
      "3. Software updates"
    ],
    "answer": 1
  },
  {
    "q": "What do you mean by â€œData principalâ€ under DPDPA?",
    "choices": [
      "0. The person controlling the data processing",
      "1. The entity processing the data",
      "2. The user to whom the data refers to",
      "3. The external security auditor"
    ],
    "answer": 2
  },
  {
    "q": "Under the DPDPA, which of the following activity requires explicit consent of the user?",
    "choices": [
      "0. Data processing",
      "1. Data collection",
      "2. Data storage",
      "3. Data anonymization"
    ],
    "answer": 1
  },
  {
    "q": "What is the purpose of an Identity and Access Management (IAM) system in cloud security?",
    "choices": [
      "0. Managing cloud service pricing",
      "1. Ensuring secure communication between services",
      "2. Enabling users to securely access cloud resources",
      "3. Automating cloud deployments"
    ],
    "answer": 2
  },
  {
    "q": "Which type of attack involves overwhelming a system with requests to disrupt service?",
    "choices": [
      "0. Phishing",
      "1. SQL Injection",
      "2. Denial of Service (DoS)",
      "3. Cross-Site Scripting"
    ],
    "answer": 2
  },
  {
    "q": "In Cloud Computing, one common mechanism for providing the separation of data and services is?",
    "choices": [
      "0. Virtualization",
      "1. Integration",
      "2. Sensitization",
      "3. All of the Above"
    ],
    "answer": 0
  },
  {
    "q": "Facility provided by multi-user information system, which enables the user to override system or application access controls?",
    "choices": [
      "0. Authentication Bypass",
      "1. Virtualization",
      "2. Privileges Escalation",
      "3. All of the Above"
    ],
    "answer": 2
  },
  {
    "q": "If a web application does not validate authorization of a user for direct references to restricted files. Which threat such a website is vulnerable?",
    "choices": [
      "0. Injection",
      "1. CSRF",
      "2. Insecure Direct Object References",
      "3. XSS"
    ],
    "answer": 2
  },
  {
    "q": "What is the primary purpose of data hashing?",
    "choices": [
      "0. To encrypt data for security by symmetric key",
      "1. To convert sensitive data into an irreversible fixed-length value",
      "2. To encrypt data for security by Asymmetric key",
      "3. To compress data for storage efficiency"
    ],
    "answer": 1
  },
  {
    "q": "What does DPDPA stand for in the context of data privacy?",
    "choices": [
      "0. Data Protection and Data Privacy Act",
      "1. Digital Protection and Data Privacy Act",
      "2. Data Protection and Data Privacy Authority",
      "3. Data Privacy and Data Protection Act"
    ],
    "answer": 3
  },
  {
    "q": "What is the primary goal of data masking?",
    "choices": [
      "0. To remove data for security",
      "1. To delete sensitive data during the testing or development",
      "2. To ensure data privacy during testing or development",
      "3. To generate synthetic data"
    ],
    "answer": 2
  },
  {
    "q": "The DPDPA is primarily concerned with?",
    "choices": [
      "0. CyberSecurity and threat prevention",
      "1. Protecting digital data and individuals' privacy rights",
      "2. Regulating online advertising and threat prevention",
      "3. Promoting digital marketing strategies"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary purpose of Content Security Policy (CSP) in web application security?",
    "choices": [
      "0. To ensure only trusted content is executed by the browser",
      "1. To prevent cross-site request forgery (CSRF) attacks",
      "2. To encrypt sensitive data transmitted over the network",
      "3. To limit access control for different user roles within the application"
    ],
    "answer": 0
  },
  {
    "q": "Which of the following best describes the relationship between a public key and a private key in asymmetric encryption?",
    "choices": [
      "0. The public key is used to encrypt data, and the private key is used to decrypt it",
      "1. The private key is used to encrypt data, and the public key is used to decrypt it",
      "2. Both keys are used for encryption, but one is faster than the other",
      "3. Both keys are used for decryption, but one is more secure than the other"
    ],
    "answer": 0
  },
  {
    "q": "Which cloud security control focuses on safeguarding the access points into the network?",
    "choices": [
      "0. Data Masking",
      "1. Perimeter Security",
      "2. Elastic Compute Security",
      "3. All of the Above"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary objective of a Privilege Escalation attack?",
    "choices": [
      "0. To gain access to sensitive data on the target system",
      "1. To prevent users from accessing their accounts",
      "2. To acquire higher-level access or permissions than initially granted",
      "3. All of the Above"
    ],
    "answer": 2
  }, 
  {
    "q": "Which security principle ensures that only authorized users can access specific data or resources?",
    "choices": [
      "0. Integrity",
      "1. Availability",
      "2. Confidentiality",
      "3. Non-repudiation"
    ],
    "answer": 2
  },
  {
    "q": "Which of the following is the BEST example of multi-factor authentication (MFA)?",
    "choices": [
      "0. Password and PIN",
      "1. Password and security question",
      "2. Password and OTP via mobile app",
      "3. Two different passwords"
    ],
    "answer": 2
  },
  {
    "q": "In a corporate environment, which control primarily helps prevent data exfiltration via email?",
    "choices": [
      "0. Data Loss Prevention (DLP) policies",
      "1. Anti-malware on endpoints",
      "2. Disk encryption on laptops",
      "3. Network time protocol (NTP) configuration"
    ],
    "answer": 0
  },
  {
    "q": "Which of the following best describes a zero-day vulnerability?",
    "choices": [
      "0. A vulnerability that is patched on the same day it is discovered",
      "1. A vulnerability that is known to the vendor but not yet exploited",
      "2. A vulnerability that is unknown to the vendor and has no patch",
      "3. A vulnerability that only affects legacy systems"
    ],
    "answer": 2
  },
  {
    "q": "Which header can help mitigate clickjacking attacks in web applications?",
    "choices": [
      "0. Strict-Transport-Security",
      "1. X-Frame-Options",
      "2. Content-Encoding",
      "3. Cache-Control"
    ],
    "answer": 1
  },
  {
    "q": "In cloud security, which of the following is typically the customer's responsibility in an IaaS model?",
    "choices": [
      "0. Physical security of the data center",
      "1. Hypervisor patching",
      "2. Guest OS configuration and patching",
      "3. Power and cooling of servers"
    ],
    "answer": 2
  },
  {
    "q": "What is the main objective of network segmentation in a corporate environment?",
    "choices": [
      "0. To increase internet speed for all users",
      "1. To isolate sensitive systems and limit lateral movement",
      "2. To disable internal firewalls",
      "3. To simplify IP addressing"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following attacks specifically targets the availability of a service?",
    "choices": [
      "0. Brute force attack",
      "1. Denial of Service (DoS) attack",
      "2. Man-in-the-Middle attack",
      "3. Phishing attack"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary purpose of disk encryption on laptops used by employees?",
    "choices": [
      "0. To prevent malware infections",
      "1. To protect data at rest if the device is lost or stolen",
      "2. To improve system performance",
      "3. To bypass login passwords"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following best describes the principle of least privilege?",
    "choices": [
      "0. Users should have access to all data to perform their tasks efficiently",
      "1. Users should have only the minimum access needed to perform their job",
      "2. Administrators should share accounts to avoid complexity",
      "3. Access should be granted permanently once approved"
    ],
    "answer": 1
  },
  {
    "q": "Which protocol is commonly used to securely manage network devices such as routers and switches?",
    "choices": [
      "0. Telnet",
      "1. FTP",
      "2. SSH",
      "3. HTTP"
    ],
    "answer": 2
  },
  {
    "q": "Which type of malware is specifically designed to demand payment from a victim by encrypting their data?",
    "choices": [
      "0. Trojan",
      "1. Ransomware",
      "2. Adware",
      "3. Spyware"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary purpose of a SIEM (Security Information and Event Management) solution?",
    "choices": [
      "0. Managing user identities",
      "1. Aggregating and correlating security logs for detection and response",
      "2. Encrypting sensitive data",
      "3. Automating software deployment"
    ],
    "answer": 1
  },
  {
    "q": "Which layer of the OSI model is most associated with TLS encryption?",
    "choices": [
      "0. Network layer",
      "1. Transport layer",
      "2. Data link layer",
      "3. Physical layer"
    ],
    "answer": 1
  },
  {
    "q": "In a web application, which of the following can help mitigate SQL injection vulnerabilities?",
    "choices": [
      "0. Using parameterized queries or prepared statements",
      "1. Disabling HTTPS",
      "2. Storing passwords in plain text",
      "3. Relying only on client-side validation"
    ],
    "answer": 0
  },
  {
    "q": "Which of the following is the BEST example of a strong password?",
    "choices": [
      "0. Password123",
      "1. Welcome@123",
      "2. P@55w0rd",
      "3. A randomly generated 16-character string with letters, numbers, and symbols"
    ],
    "answer": 3
  },
  {
    "q": "Which attack involves an attacker secretly relaying and possibly altering communications between two parties who believe they are directly communicating?",
    "choices": [
      "0. Man-in-the-Middle attack",
      "1. Brute force attack",
      "2. Phishing attack",
      "3. Dictionary attack"
    ],
    "answer": 0
  },
  {
    "q": "Which log source is MOST useful for detecting suspicious authentication attempts in an enterprise environment?",
    "choices": [
      "0. DHCP logs",
      "1. Directory service or identity provider logs",
      "2. DNS query logs",
      "3. Printer logs"
    ],
    "answer": 1
  },
  {
    "q": "In the context of secure software development, what does 'shift left' mean?",
    "choices": [
      "0. Moving security checks to the production environment only",
      "1. Introducing security activities earlier in the development lifecycle",
      "2. Reducing security testing in favor of faster releases",
      "3. Delegating security testing entirely to QA"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following controls is MOST effective in preventing the reuse of compromised passwords?",
    "choices": [
      "0. Account lockout policy",
      "1. Password history and prevention of recent password reuse",
      "2. Screen lock timeout",
      "3. Single sign-on (SSO)"
    ],
    "answer": 1
  },
  {
    "q": "Which protocol is commonly used to securely transfer files over an untrusted network?",
    "choices": [
      "0. FTP",
      "1. HTTP",
      "2. SFTP",
      "3. Telnet"
    ],
    "answer": 2
  },
  {
    "q": "What is a common security risk associated with using public Wi-Fi networks without a VPN?",
    "choices": [
      "0. Increased battery consumption",
      "1. Exposure to traffic sniffing and session hijacking",
      "2. Faster bandwidth usage",
      "3. Automatic OS updates"
    ],
    "answer": 1
  },
  {
    "q": "In cloud environments, which practice helps reduce the attack surface of compute instances?",
    "choices": [
      "0. Allowing all inbound ports for flexibility",
      "1. Using security groups and restricting inbound traffic to required ports",
      "2. Disabling host-based firewalls",
      "3. Sharing administrative credentials"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following best describes social engineering in cybersecurity?",
    "choices": [
      "0. Using encryption to protect data",
      "1. Exploiting human psychology to gain unauthorized access or information",
      "2. Using automated tools for vulnerability scanning",
      "3. Creating social media accounts for marketing"
    ],
    "answer": 1
  },
  {
    "q": "Which type of vulnerability allows attackers to execute scripts in a victim's browser by injecting malicious code into a trusted website?",
    "choices": [
      "0. SQL Injection",
      "1. Cross-Site Scripting (XSS)",
      "2. Command Injection",
      "3. Directory Traversal"
    ],
    "answer": 1
  },
  {
    "q": "Which control most directly helps ensure that critical security patches are deployed consistently across all servers?",
    "choices": [
      "0. Data classification policy",
      "1. Centralized patch management system",
      "2. Password rotation policy",
      "3. VPN configuration"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is an example of technical security control?",
    "choices": [
      "0. Security awareness training",
      "1. Firewall configuration",
      "2. Background checks for employees",
      "3. Security policy document"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary purpose of a vulnerability scan in an enterprise environment?",
    "choices": [
      "0. To exploit systems and gain unauthorized access",
      "1. To identify known security weaknesses in systems and applications",
      "2. To monitor employee productivity",
      "3. To encrypt all network traffic"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following best describes spear phishing?",
    "choices": [
      "0. Mass emails sent to random recipients",
      "1. Targeted phishing emails crafted for specific individuals or organizations",
      "2. Phishing via SMS messages",
      "3. Voice-based phishing calls"
    ],
    "answer": 1
  },
  {
    "q": "In identity and access management, what is 'role-based access control' (RBAC)?",
    "choices": [
      "0. Granting access based on the user's seniority level only",
      "1. Granting access based on the role or job function of the user",
      "2. Granting access based on the location of the user",
      "3. Granting access based on the device type only"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following helps ensure non-repudiation in digital transactions?",
    "choices": [
      "0. Symmetric key encryption alone",
      "1. Digital signatures using asymmetric cryptography",
      "2. Plain-text logging",
      "3. Shared passwords"
    ],
    "answer": 1
  },
  {
    "q": "Which log type is MOST useful when investigating a suspected web application attack?",
    "choices": [
      "0. Physical access logs",
      "1. Web server access and error logs",
      "2. Printer queue logs",
      "3. VoIP call logs"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is the BEST way to store user passwords in an application database?",
    "choices": [
      "0. In plain text for easy recovery",
      "1. Encrypted with a symmetric key stored in the same database",
      "2. Hashed with a strong algorithm and salted",
      "3. Encoded with Base64"
    ],
    "answer": 2
  },
  {
    "q": "Which of the following describes a 'brute force' attack?",
    "choices": [
      "0. Sending malicious attachments via email",
      "1. Trying many possible passwords or keys until the correct one is found",
      "2. Exploiting a software buffer to execute code",
      "3. Redirecting users to fake websites"
    ],
    "answer": 1
  },
  {
    "q": "In the context of endpoint security, what is application whitelisting?",
    "choices": [
      "0. Allowing all applications except known malicious ones",
      "1. Allowing only approved applications to run on a system",
      "2. Blocking all new applications permanently",
      "3. Logging application usage without restrictions"
    ],
    "answer": 1
  },
  {
    "q": "Which configuration most helps prevent unauthorized access via Remote Desktop Protocol (RDP) over the internet?",
    "choices": [
      "0. Exposing RDP directly with a non-standard port",
      "1. Using a VPN or jump host and restricting RDP to internal networks",
      "2. Allowing RDP from all IPs for convenience",
      "3. Disabling account lockout for RDP logins"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following best describes a security incident response plan?",
    "choices": [
      "0. A list of all security tools used by the organization",
      "1. A documented process for detecting, responding to, and recovering from security incidents",
      "2. A backup schedule for all servers",
      "3. A user onboarding checklist"
    ],
    "answer": 1
  },
  {
    "q": "What is the main risk of using the same local administrator password on all endpoints in an organization?",
    "choices": [
      "0. Increased patching complexity",
      "1. Easier printer configuration",
      "2. Lateral movement after a single compromise",
      "3. Slower login times"
    ],
    "answer": 2
  },
  {
    "q": "Which of the following is an example of physical security control?",
    "choices": [
      "0. Intrusion detection system",
      "1. Role-based access control",
      "2. Security guards and access badges",
      "3. Antivirus software"
    ],
    "answer": 2
  },
  {
    "q": "What is the primary purpose of a business continuity plan (BCP)?",
    "choices": [
      "0. To define how to improve sales",
      "1. To ensure critical business functions can continue during and after a disruption",
      "2. To train users on social media usage",
      "3. To schedule OS updates"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following password policies most improves resistance to credential stuffing attacks?",
    "choices": [
      "0. Minimum password length of 6 characters",
      "1. Allowing password reuse across different systems",
      "2. Enforcing unique passwords and MFA for all external logins",
      "3. Allowing simple dictionary words"
    ],
    "answer": 2
  },
  {
    "q": "Which attack involves sending forged ARP messages on a local network to associate the attackerâ€™s MAC address with the IP address of another host?",
    "choices": [
      "0. DNS poisoning",
      "1. ARP spoofing",
      "2. Port scanning",
      "3. SQL injection"
    ],
    "answer": 1
  },
  {
    "q": "What is the main purpose of network intrusion detection systems (IDS)?",
    "choices": [
      "0. To physically block malicious traffic automatically in all cases",
      "1. To monitor network traffic and alert on suspicious patterns",
      "2. To replace firewalls",
      "3. To manage user accounts"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following best describes 'shadow IT'?",
    "choices": [
      "0. IT assets that are fully documented",
      "1. Unauthorized or unmanaged systems and applications used without formal approval",
      "2. Legacy systems that are still in production",
      "3. IT infrastructure hosted only in the cloud"
    ],
    "answer": 1
  },
  {
    "q": "In the context of email security, what does SPF primarily help prevent?",
    "choices": [
      "0. Email encryption",
      "1. Sender address spoofing",
      "2. Attachment size limits",
      "3. Data loss via outbound emails"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following practices most helps secure API endpoints exposed over the internet?",
    "choices": [
      "0. Using only HTTP without authentication",
      "1. Implementing strong authentication, authorization, and input validation",
      "2. Allowing all IP addresses without rate limiting",
      "3. Disabling TLS to reduce overhead"
    ],
    "answer": 1
  },
  {
    "q": "Which backup strategy provides the fastest recovery time for critical systems?",
    "choices": [
      "0. No backups, only redundancy",
      "1. Full backups performed once per year",
      "2. Regular full and incremental backups with tested restoration procedures",
      "3. Manual file copies to user desktops"
    ],
    "answer": 2
  },
  {
    "q": "Which of the following best helps detect data exfiltration over unusual network channels?",
    "choices": [
      "0. Disabling antivirus software",
      "1. Monitoring outbound network traffic and setting DLP rules",
      "2. Allowing unrestricted outbound connections",
      "3. Using only local firewalls"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is a common sign of a compromised endpoint?",
    "choices": [
      "0. Regular OS updates",
      "1. Unexpected processes, high CPU usage, and unknown outbound connections",
      "2. Scheduled antivirus scans",
      "3. Normal login activity"
    ],
    "answer": 1
  },
  {
    "q": "What is 'credential stuffing'?",
    "choices": [
      "0. Guessing passwords randomly",
      "1. Using leaked username-password pairs from one service to access other services",
      "2. Harvesting credentials via keyloggers only",
      "3. Storing passwords in password managers"
    ],
    "answer": 1
  },
  {
    "q": "In a SOC, which metric indicates how quickly analysts respond to detected security events?",
    "choices": [
      "0. Mean Time to Detect (MTTD)",
      "1. Mean Time to Respond (MTTR)",
      "2. Recovery Time Objective (RTO)",
      "3. Recovery Point Objective (RPO)"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is MOST important when granting third-party vendors access to internal systems?",
    "choices": [
      "0. Providing shared admin accounts for simplicity",
      "1. Enforcing least privilege, MFA, and contractual security requirements",
      "2. Allowing permanent access without review",
      "3. Relying only on vendor self-attestation"
    ],
    "answer": 1
  },
  {
    "q": "Which type of test is performed without prior knowledge to the internal IT team, simulating a real attacker as closely as possible?",
    "choices": [
      "0. Vulnerability scan",
      "1. White-box penetration test",
      "2. Black-box penetration test or red team exercise",
      "3. Code review"
    ],
    "answer": 2
  },
  {
    "q": "What is the main security benefit of using a reverse proxy in front of web applications?",
    "choices": [
      "0. Eliminating the need for SSL certificates",
      "1. Hiding backend servers, centralizing TLS, and enabling security filtering",
      "2. Allowing direct database access from the internet",
      "3. Storing user credentials"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following MOST helps reduce risks from outdated and unused user accounts?",
    "choices": [
      "0. Allowing accounts to remain indefinitely",
      "1. Periodic user access reviews and timely deprovisioning",
      "2. Granting all users admin access",
      "3. Only changing passwords"
    ],
    "answer": 1
  },
  {
    "q": "What is the key difference between authentication and authorization?",
    "choices": [
      "0. Authentication verifies who the user is, authorization defines what they can access",
      "1. Authentication manages logs, authorization manages backups",
      "2. Authorization happens before authentication",
      "3. They are identical concepts"
    ],
    "answer": 0
  },
  {
    "q": "Which of the following is a common security risk of using default configurations on network devices?",
    "choices": [
      "0. Improved performance",
      "1. Presence of default credentials and open services",
      "2. Stronger encryption settings by default",
      "3. Automatic configuration backups"
    ],
    "answer": 1
  },
  {
    "q": "Which type of malware disguises itself as legitimate software to trick users into executing it?",
    "choices": [
      "0. Worm",
      "1. Rootkit",
      "2. Trojan horse",
      "3. Botnet"
    ],
    "answer": 2
  },
  {
    "q": "Which control helps ensure that changes to critical systems are tracked and properly reviewed?",
    "choices": [
      "0. Change management and approval process",
      "1. Guest Wi-Fi access",
      "2. Screen saver timeouts",
      "3. Default printer settings"
    ],
    "answer": 0
  },
  {
    "q": "In an incident response lifecycle, which phase focuses on learning and improving from past incidents?",
    "choices": [
      "0. Identification",
      "1. Containment",
      "2. Eradication",
      "3. Lessons learned or post-incident activity"
    ],
    "answer": 3
  },
  {
    "q": "Which of the following can help mitigate risks from stolen access tokens in web applications?",
    "choices": [
      "0. Long-lived tokens with no revocation",
      "1. Implementing short-lived tokens and refresh tokens with proper revocation",
      "2. Storing tokens in insecure local files",
      "3. Sending tokens over unencrypted HTTP"
    ],
    "answer": 1
  },
  {
    "q": "Which statement best describes a 'risk' in cybersecurity?",
    "choices": [
      "0. The presence of a firewall",
      "1. The potential that a threat will exploit a vulnerability and cause impact",
      "2. A list of security controls",
      "3. The number of security tools deployed"
    ],
    "answer": 1
  },
  {
    "q": "What is the primary purpose of data classification in an organization?",
    "choices": [
      "0. To assign IP addresses to servers",
      "1. To prioritize protection efforts based on data sensitivity and business impact",
      "2. To define password history",
      "3. To manage physical office locations"
    ],
    "answer": 1
  },
  {
    "q": "Which of the following is an example of a detective control?",
    "choices": [
      "0. Firewall blocking rules",
      "1. Encryption of data at rest",
      "2. Security event monitoring and alerting",
      "3. Security awareness training"
    ],
    "answer": 2
  },
  {
    "q": "Which practice MOST reduces the impact of a successful phishing attack that steals valid credentials?",
    "choices": [
      "0. Reusing passwords across systems",
      "1. Enforcing multi-factor authentication for critical applications",
      "2. Allowing unlimited login attempts",
      "3. Disabling logging"
    ],
    "answer": 1
  },
  {
    "q": "In the context of web security, what is 'input validation' mainly used for?",
    "choices": [
      "0. Ensuring all data is encrypted at rest",
      "1. Ensuring that data provided by users conforms to expected formats and constraints",
      "2. Ensuring data is compressed",
      "3. Managing user sessions"
    ],
    "answer": 1
  },
  {
    "q": "Which characteristic is MOST important for a good security log?",
    "choices": [
      "0. Minimal information to save storage",
      "1. Accurate timestamps, relevant details, and integrity protection",
      "2. Only high-level summaries",
      "3. Logs stored only on local machines"
    ],
    "answer": 1
  },
  {
    "q": "Which approach helps limit damage if an attacker compromises one microservice in a microservices-based application?",
    "choices": [
      "0. Using a single shared database account for all services",
      "1. Implementing network segmentation and least privilege between services",
      "2. Allowing all services full access to each other",
      "3. Disabling all authentication between services"
    ],
    "answer": 1
  }
  
];

// STATE
let players = []; // {name, pos, color}
let currentPlayer = 0;let started=false;let pendingSpecial=null;
const COLORS = ['#1abc9c','#3498db','#e67e22','#9b59b6','#e74c3c','#34495e','#f1c40f'];

// images (data URLs)
let snakeImgData = null; let ladderImgData = null;

// UI refs
const boardEl = document.getElementById('board');
const overlay = document.getElementById('overlay');
const playerInputs = document.getElementById('playerInputs');
const addPlayerBtn = document.getElementById('addPlayer');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const rollBtn = document.getElementById('rollBtn');
const diceEl = document.getElementById('dice');
const currentTurnEl = document.getElementById('currentTurn');
const logEl = document.getElementById('log');
const modal = document.getElementById('modal');
const qText = document.getElementById('qText');
const qChoices = document.getElementById('qChoices');
const submitAnswer = document.getElementById('submitAnswer');
const cancelAnswer = document.getElementById('cancelAnswer');
const questionData = document.getElementById('questionData');
const saveQuestions = document.getElementById('saveQuestions');
const loadSample = document.getElementById('loadSample');
const ladderNeedsQuestion = document.getElementById('ladderNeedsQuestion');
const snakeNeedsQuestion = document.getElementById('snakeNeedsQuestion');
const snakeImageInput = document.getElementById('snakeImageInput');
const ladderImageInput = document.getElementById('ladderImageInput');
const clearIcons = document.getElementById('clearIcons');

// ---------------- HELPERS ----------------
function log(msg){const p=document.createElement('div');p.textContent=msg;logEl.prepend(p);} 
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}

// Map a cell number (1..100) to center coordinates (x,y) in SVG/px (origin top-left)
function cellCenter(num){
  const n = clamp(parseInt(num),1,100);
  const rowFromBottom = Math.floor((n-1)/10); // 0..9
  const rowFromTop = 9 - rowFromBottom; // 9..0
  const withinRow = (n-1) % 10; // 0..9
  let col;
  if(rowFromBottom % 2 === 0){ // left->right on that row
    col = withinRow;
  } else { // right->left on that row
    col = 9 - withinRow;
  }
  const x = col * CELL_SIZE + CELL_SIZE/2;
  const y = rowFromTop * CELL_SIZE + CELL_SIZE/2;
  return [x,y];
}

function drawOverlay(){
  // ensure the overlay matches board size
  overlay.setAttribute('width', BOARD_PX);
  overlay.setAttribute('height', BOARD_PX);
  overlay.innerHTML = '';

  // draw ladders first (so snakes appear above if overlapping)
  for(const [sStr,eStr] of Object.entries(ladders)){
    const s = parseInt(sStr), e = parseInt(eStr);
    const [x1,y1] = cellCenter(s), [x2,y2] = cellCenter(e);
    const dx = x2 - x1, dy = y2 - y1;
    const len = Math.hypot(dx,dy) || 1;
    const ux = dx / len, uy = dy / len;
    // perpendicular unit
    const px = -uy, py = ux;
    const sep = 12; // separation between rails
    const x1a = x1 + px*sep, y1a = y1 + py*sep;
    const x2a = x2 + px*sep, y2a = y2 + py*sep;
    const x1b = x1 - px*sep, y1b = y1 - py*sep;
    const x2b = x2 - px*sep, y2b = y2 - py*sep;

    // rails
    const rail1 = document.createElementNS('http://www.w3.org/2000/svg','line');
    rail1.setAttribute('x1',x1a);rail1.setAttribute('y1',y1a);rail1.setAttribute('x2',x2a);rail1.setAttribute('y2',y2a);rail1.setAttribute('class','ladder-line');
    const rail2 = document.createElementNS('http://www.w3.org/2000/svg','line');
    rail2.setAttribute('x1',x1b);rail2.setAttribute('y1',y1b);rail2.setAttribute('x2',x2b);rail2.setAttribute('y2',y2b);rail2.setAttribute('class','ladder-line');
    overlay.appendChild(rail1);overlay.appendChild(rail2);

    // rungs
    const rungCount = Math.max(3, Math.floor(len / 60));
    for(let i=0;i<=rungCount;i++){
      const t = i / rungCount;
      const xr = x1 + dx * t; const yr = y1 + dy * t;
      const rxa = xr + px*sep*0.95, rya = yr + py*sep*0.95;
      const rxb = xr - px*sep*0.95, ryb = yr - py*sep*0.95;
      const rung = document.createElementNS('http://www.w3.org/2000/svg','line');
      rung.setAttribute('x1',rxa);rung.setAttribute('y1',rya);rung.setAttribute('x2',rxb);rung.setAttribute('y2',ryb);rung.setAttribute('class','ladder-rung');
      overlay.appendChild(rung);
    }

    // optional images at both ends (if provided)
    if(ladderImgData){
      const imgW = Math.min(48, Math.max(24, Math.floor(len/6)));
      const imgH = imgW;
      const imgTop = document.createElementNS('http://www.w3.org/2000/svg','image');
      imgTop.setAttribute('href', ladderImgData);
      imgTop.setAttribute('width', imgW); imgTop.setAttribute('height', imgH);
      imgTop.setAttribute('x', x2 - imgW/2); imgTop.setAttribute('y', y2 - imgH/2);
      const angle = Math.atan2(dy,dx) * 180/Math.PI;
      imgTop.setAttribute('transform', `rotate(${angle} ${x2} ${y2})`);
      overlay.appendChild(imgTop);

      const imgBot = document.createElementNS('http://www.w3.org/2000/svg','image');
      imgBot.setAttribute('href', ladderImgData);
      imgBot.setAttribute('width', imgW-10); imgBot.setAttribute('height', imgH-10);
      imgBot.setAttribute('x', x1 - (imgW-10)/2); imgBot.setAttribute('y', y1 - (imgH-10)/2);
      imgBot.setAttribute('transform', `rotate(${angle} ${x1} ${y1})`);
      overlay.appendChild(imgBot);
    } else {
      // small markers
      const topCircle = document.createElementNS('http://www.w3.org/2000/svg','circle');
      topCircle.setAttribute('cx',x2);topCircle.setAttribute('cy',y2);topCircle.setAttribute('r',10);topCircle.setAttribute('fill','#6d4c41');overlay.appendChild(topCircle);
      const bottomCircle = document.createElementNS('http://www.w3.org/2000/svg','circle');
      bottomCircle.setAttribute('cx',x1);bottomCircle.setAttribute('cy',y1);bottomCircle.setAttribute('r',8);bottomCircle.setAttribute('fill','#8d6e63');overlay.appendChild(bottomCircle);
    }
  }

  // snakes (draw above ladders)
  for(const [sStr,eStr] of Object.entries(snakes)){
    const s = parseInt(sStr), e = parseInt(eStr);
    const [x1,y1] = cellCenter(s), [x2,y2] = cellCenter(e);
    const dx = x2 - x1, dy = y2 - y1; const dist = Math.hypot(dx,dy);
    const offset = clamp(dist * 0.35, 40, 160);
    const cp1x = x1 + (dx * 0.3) - (dy/dist)*offset;
    const cp1y = y1 + (dy * 0.3) + (dx/dist)*offset;
    const cp2x = x1 + (dx * 0.7) - (dy/dist)*offset;
    const cp2y = y1 + (dy * 0.7) + (dx/dist)*offset;
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    const d = `M ${x1} ${y1} C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${x2} ${y2}`;
    path.setAttribute('d', d); path.setAttribute('class','snake-path'); path.setAttribute('stroke-dasharray','8 6');
    overlay.appendChild(path);

    // snake head - use image if provided, else a circle + 'S'
    const angle = Math.atan2(dy,dx) * 180/Math.PI;
    if(snakeImgData){
      const imgW = Math.min(54, Math.max(28, Math.floor(dist/5)));
      const imgH = imgW;
      const img = document.createElementNS('http://www.w3.org/2000/svg','image');
      img.setAttribute('href', snakeImgData);
      img.setAttribute('width', imgW); img.setAttribute('height', imgH);
      img.setAttribute('x', x1 - imgW/2); img.setAttribute('y', y1 - imgH/2);
      img.setAttribute('transform', `rotate(${angle} ${x1} ${y1})`);
      overlay.appendChild(img);
    } else {
      const head = document.createElementNS('http://www.w3.org/2000/svg','circle');
      head.setAttribute('cx',x1);head.setAttribute('cy',y1);head.setAttribute('r',12);head.setAttribute('class','snake-head');overlay.appendChild(head);
      const label = document.createElementNS('http://www.w3.org/2000/svg','text');
      label.setAttribute('x',x1);label.setAttribute('y',y1+4);label.setAttribute('class','marker-label');label.textContent='S';overlay.appendChild(label);
    }
  }
}

// Build board DOM with correct zig-zag numbering (top-left = 100)
function createBoard(){
  boardEl.innerHTML = '';
  for(let rowFromTop = 0; rowFromTop < 10; rowFromTop++){
    const rowFromBottom = 9 - rowFromTop; // 9..0
    for(let col = 0; col < 10; col++){
      const withinRow = (rowFromBottom % 2 === 0) ? col : (9 - col);
      const n = rowFromBottom * 10 + withinRow + 1;
      const cell = document.createElement('div'); cell.className='cell'; cell.dataset.cell = n;
      const numdiv = document.createElement('div'); numdiv.className='num'; numdiv.textContent = n; cell.appendChild(numdiv);
      boardEl.appendChild(cell);
    }
  }
  drawOverlay();
}

function renderPlayers(){
  document.querySelectorAll('.cell .tokens').forEach(e=>e.remove());
  players.forEach((p, idx)=>{
    const pos = clamp(p.pos,1,100);
    const cell = boardEl.querySelector(`.cell[data-cell='${pos}']`) || boardEl.querySelector(`.cell[data-cell='1']`);
    let tokens = cell.querySelector('.tokens'); if(!tokens){ tokens = document.createElement('div'); tokens.className='tokens'; cell.appendChild(tokens); }
    const t = document.createElement('div'); t.className='token'; t.style.background = p.color; t.textContent = p.name.charAt(0).toUpperCase(); tokens.appendChild(t);
  });
}

function addPlayerField(name='Player'){
  const wrapper = document.createElement('div'); wrapper.className='player-row'; wrapper.style.display='flex'; wrapper.style.gap='8px'; wrapper.style.alignItems='center';
  const input = document.createElement('input'); input.type='text'; input.value = name; input.style.flex='1'; input.style.padding='8px';
  const colorBtn = document.createElement('input'); colorBtn.type='color'; colorBtn.value = COLORS[document.querySelectorAll('.player-row').length % COLORS.length];
  const remove = document.createElement('button'); remove.textContent='Remove'; remove.className='secondary'; remove.onclick = ()=>wrapper.remove();
  wrapper.appendChild(input); wrapper.appendChild(colorBtn); wrapper.appendChild(remove);
  playerInputs.appendChild(wrapper);
}

function startGame(){
  const rows = document.querySelectorAll('.player-row'); players = [];
  rows.forEach((r,i)=>{
    const name = r.querySelector('input[type=text]').value || `P${i+1}`;
    const color = r.querySelector('input[type=color]').value || COLORS[i%COLORS.length];
    players.push({name, pos:1, color});
  });
  if(players.length < 2){ alert('Add at least 2 players'); return; }
  started = true; currentPlayer = 0; rollBtn.disabled = false; startBtn.disabled = true; addPlayerBtn.disabled = true; logEl.innerHTML = '';
  log(`Game started with ${players.length} players`);
  renderPlayers(); updateTurnUI();
}

function resetGame(){
  started=false; players=[]; playerInputs.innerHTML=''; for(let i=0;i<2;i++) addPlayerField('Player '+(i+1)); createBoard(); renderPlayers(); startBtn.disabled=false; addPlayerBtn.disabled=false; rollBtn.disabled=true; diceEl.textContent='Dice: -'; currentTurnEl.textContent='Turn: -'; logEl.innerHTML='';
}

function updateTurnUI(){ if(players.length>0) currentTurnEl.textContent = `Turn: ${players[currentPlayer].name}`; }

function rollDice(){ if(!started) return; const n = Math.floor(Math.random()*6)+1; diceEl.textContent = `Dice: ${n}`; log(`${players[currentPlayer].name} rolled a ${n}`); movePlayer(currentPlayer, n); }

function movePlayer(idx, n){ const p = players[idx]; let target = p.pos + n; if(target > 100){ log(`${p.name} needs exact roll to reach 100`); nextTurn(); return; } p.pos = target; log(`${p.name} moves to ${p.pos}`); renderPlayers(); checkSpecialSquare(idx); }

function checkSpecialSquare(idx){ const p = players[idx]; const pos = p.pos; if(pos === 100){ log(`${p.name} wins! ðŸŽ‰`); rollBtn.disabled = true; return; } if(ladders[pos]){ if(ladderNeedsQuestion.checked){ askQuestionFor('ladder', idx, pos, ladders[pos]); } else { log(`${p.name} climbs ladder ${pos} â†’ ${ladders[pos]}`); p.pos = ladders[pos]; renderPlayers(); nextTurn(); } return; } if(snakes[pos]){ if(snakeNeedsQuestion.checked){ askQuestionFor('snake', idx, pos, snakes[pos]); } else { log(`${p.name} bitten by snake ${pos} â†’ ${snakes[pos]}`); p.pos = snakes[pos]; renderPlayers(); nextTurn(); } return; } nextTurn(); }

function askQuestionFor(type, idx, from, to){ pendingSpecial = {type, idx, from, to}; const q = questionBank[Math.floor(Math.random()*questionBank.length)]; openModal(q); }

function openModal(q){ qText.textContent = q.q; qChoices.innerHTML = ''; q.choices.forEach((c,i)=>{ const label = document.createElement('label'); label.style.cursor='pointer'; label.style.display='flex'; label.style.alignItems='center'; label.style.gap='8px'; const r = document.createElement('input'); r.type='radio'; r.name='choice'; r.value = i; if(i===0) r.checked = true; label.appendChild(r); const span = document.createElement('span'); span.textContent = c; label.appendChild(span); qChoices.appendChild(label); }); modal.style.display = 'flex'; submitAnswer.onclick = ()=>{ const sel = document.querySelector('input[name=choice]:checked'); const chosen = sel ? parseInt(sel.value) : -1; modal.style.display='none'; handleAnswer(q, chosen); }; cancelAnswer.onclick = ()=>{ modal.style.display='none'; handleAnswer(q, -1); }; }

function handleAnswer(q, chosen){ const correct = chosen === q.answer; const p = players[pendingSpecial.idx]; if(pendingSpecial.type === 'ladder'){ if(correct){ log(`${p.name} answered correctly and climbs ladder ${pendingSpecial.from} â†’ ${pendingSpecial.to}`); p.pos = pendingSpecial.to; renderPlayers(); } else { log(`${p.name} answered incorrectly and stays at ${pendingSpecial.from}`); } } else if(pendingSpecial.type === 'snake'){ if(correct){ log(`${p.name} answered correctly and avoids snake at ${pendingSpecial.from}`); } else { log(`${p.name} answered incorrectly and is bitten ${pendingSpecial.from} â†’ ${pendingSpecial.to}`); p.pos = pendingSpecial.to; renderPlayers(); } } pendingSpecial = null; nextTurn(); }

function nextTurn(){ if(players.length === 0) return; if(players[currentPlayer].pos === 100){ rollBtn.disabled = true; return; } currentPlayer = (currentPlayer + 1) % players.length; updateTurnUI(); }

// QUESTION BANK helpers
function refreshQuestionTextarea(){ questionData.value = JSON.stringify(questionBank, null, 2); }
function saveQuestionFromTextarea(){ try{ const parsed = JSON.parse(questionData.value); if(!Array.isArray(parsed)) throw 'JSON must be an array'; questionBank = parsed; alert('Questions saved'); } catch(e){ alert('Invalid JSON: ' + e); } }

// FILE UPLOAD HANDLERS FOR CUSTOM ICONS
snakeImageInput.addEventListener('change', function(e){ const f = this.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ()=>{ snakeImgData = reader.result; drawOverlay(); }; reader.readAsDataURL(f); });
ladderImageInput.addEventListener('change', function(e){ const f = this.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ()=>{ ladderImgData = reader.result; drawOverlay(); }; reader.readAsDataURL(f); });
clearIcons.addEventListener('click', ()=>{ snakeImgData = null; ladderImgData = null; snakeImageInput.value = ''; ladderImageInput.value = ''; drawOverlay(); });

// EVENTS
addPlayerBtn.onclick = ()=> addPlayerField('Player '+(document.querySelectorAll('.player-row').length+1));
startBtn.onclick = startGame; resetBtn.onclick = resetGame; rollBtn.onclick = ()=>{ rollBtn.disabled = true; setTimeout(()=>{ rollDice(); rollBtn.disabled = false; }, 120); };
// Save questions to file
saveQuestions.onclick = () => {
  saveQuestionFromTextarea();
  const blob = new Blob([JSON.stringify(questionBank,null,2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "questions.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
};

// Load questions from JSON file
loadSample.onclick = () => fileInput.click();
fileInput.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    try {
      const parsed = JSON.parse(reader.result);
      if(!Array.isArray(parsed)) throw "Not an array";
      questionBank = parsed;
      refreshQuestionTextarea();
      alert("Questions loaded from file");
    } catch(err) {
      alert("Invalid JSON: " + err);
    }
  };
  reader.readAsText(file);
});

// Expose for debugging
window.snakes = snakes; window.ladders = ladders; window.questionBank = questionBank; window.drawOverlay = drawOverlay;

// INIT
resetGame(); refreshQuestionTextarea();

// redraw overlay on resize (if CSS variable changed)
window.addEventListener('resize', ()=>{ drawOverlay(); });

</script>
</body>
</html>
